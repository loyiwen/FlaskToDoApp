{% extends "base.html" %}

{% block content %}
<h2>{{ filter if filter else "All" }} Assessments</h2>

{% if assessments %}
<ul>
    {% for assessment in assessments %}
    <li>
        <div>
            <strong>{{ assessment.title }}</strong> - {{ assessment.module_code }}<br>
            Due: {{ assessment.deadline.strftime('%Y-%m-%d') }}
            <span class="status {{ 'complete' if assessment.is_complete else 'incomplete' }}">
                {% if assessment.is_complete %}✓ Completed{% else %}✗ Not Completed{% endif %}
            </span>
        </div>
        <div class="actions">
            <form action="{{ url_for('toggle_completion', id=assessment.id) }}" method="post" style="display:inline;">
                <button type="submit">
                    {% if assessment.is_complete %}
                        Mark as Incomplete
                    {% else %}
                        Mark as Complete
                    {% endif %}
                </button>
            </form>
            <a class="button-link" href="{{ url_for('edit', id=assessment.id) }}">Edit</a>
            <form action="{{ url_for('delete_assessment', id=assessment.id) }}" method="post" style="display:inline;">
                <button type="submit" onclick="return confirm('Are you sure you want to delete this assessment?');">
                    Delete
                </button>
            </form>
        </div>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No assessments to show.</p>
{% endif %}
{% endblock %}
